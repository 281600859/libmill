
#include <stdio.h>
#include <assert.h>
#include <uv.h>

#include "msleep.h"

coroutine stopwatch ()
{
    void *s1;
    void *s2;
    endvars;

    s1 = call msleep (1000);
    s2 = call msleep (2000);

    while (1) {
        wait;
        if (@who == s1)
            printf ("1 second elapsed!\n");
        if (@who == s2)
            printf ("2 seconds elapsed!\n");
    }
}

int main ()
{
    stopwatch (1);
    return 0;
}

