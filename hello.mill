
#include <stdio.h>

coroutine stopwatch ()
{
    void *sleep1;
    void *sleep2;
    void *hndl = 0;
    endvars;

    sleep1 = call msleep (1000);
    sleep2 = call msleep (2000);

    while (1) {
        wait (&hndl, 0);
        if (hndl == sleep1)
            printf ("1 second elapsed!\n");
        if (hndl == sleep2)
            printf ("2 seconds elapsed!\n");
    }
}

int main ()
{
    stopwatch ();
    return 0;
}
